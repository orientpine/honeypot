# 4단계 문장 패턴 가이드

본 문서는 국가기관 제출용 연구 보고서 작성 시 적용해야 하는 4단계 문장 패턴을 정의합니다.

---

## 개요

각 연구 내용 섹션(1.1, 1.2, 2.1 등)은 반드시 다음 4단계 패턴을 따라 작성해야 합니다. 이 패턴은 공학 박사 수준의 전문성과 국가기관 제출 문서의 형식적 요구사항을 충족합니다.

---

## 4단계 문장 패턴

### 1단계: 과제 정의 (연구 과제 선언)

**패턴:**
```
- 본 사업에서 맡은 주요 연구 과제는 [기술 분야]를 위한 [개발 시스템명] 개발임
```

**작성 규칙:**
- 반드시 "본 사업에서 맡은 주요 연구 과제는"으로 시작
- [기술 분야]: 해당 섹션의 기술 도메인 명시 (예: "굴착기 자율화", "실시간 제어", "강화학습 기반 의사결정")
- [개발 시스템명]: 구체적이고 기술적인 시스템 명칭 (예: "CAN 통신 기반 다중 센서 데이터 수집 및 융합 시스템")
- "개발임"으로 종결

**예시:**
- "본 사업에서 맡은 주요 연구 과제는 굴착기 자율화를 위한 CAN 통신 기반 다중 센서 데이터 수집 및 융합 시스템 개발임"
- "본 사업에서 맡은 주요 연구 과제는 3자유도(3-DOF) 평면 굴착기의 정기구학 연산을 통한 버킷 끝단 위치 실시간 계산 시스템 개발임"
- "본 사업에서 맡은 주요 연구 과제는 강화학습(Reinforcement Learning) 기반 자율 굴착 의사결정 시스템 개발임"

---

### 2단계: 문제 정의 및 필요성

**패턴:**
```
- [기존 방식/상황]으로는 [문제점/한계]이므로, [해결책/목표 시스템] 구축이 필요함
```

**작성 규칙:**
- [기존 방식/상황]: 현재 기술의 한계나 기존 접근 방식 서술
- [문제점/한계]: 구체적인 기술적 문제점 명시
- [해결책/목표 시스템]: 본 연구에서 제안하는 해결책
- "구축이 필요함" 또는 "시스템 개발이 필요함"으로 종결

**예시:**
- "기존의 개별 센서 운용 방식으로는 실시간 동기화 및 데이터 일관성 확보가 어려우므로, 통합 CAN 버스 아키텍처를 통한 센서 융합 시스템 구축이 필요함"
- "기존 포텐셔미터 기반 각도 측정은 기계적 마모와 환경 변화에 취약하므로, CANopen 기반 고정밀 경사계를 통한 관절 각도 측정 시스템 구축이 필요함"
- "자율 굴착 작업 중 유압 과부하 및 장비 손상을 방지하기 위해, 실시간 유압 압력 모니터링과 이상 감지 시스템 구축이 필요함"

---

### 3단계: 해결 방안 (구현 및 개발)

**패턴:**
```
- 이를 위해 [노드/모듈/클래스명] 개발을 통한 [기술 구현 내용] 수행
```

**작성 규칙:**
- 반드시 "이를 위해"로 시작
- [노드/모듈/클래스명]: 실제 구현체 이름 명시 (예: can_bridge_node, ExcavatorKinematics 클래스)
- [기술 구현 내용]: 구체적인 기술 스택과 인터페이스 명시
- 여러 구현 사항은 별도 항목으로 분리

**예시:**
- "이를 위해 can_bridge_node 개발을 통한 SocketCAN 기반 실시간 CAN 통신 인터페이스 구현 및 CAN ID별 메시지 파싱 시스템 개발"
- "이를 위해 forward_kinematics_node 개발을 통한 20Hz 주기 정기구학 연산 시스템 구현 및 실시간 버킷 위치 발행 인터페이스 개발"
- "이를 위해 trajectory_generator_node 개발을 통한 /excavator/trajectory_generator 서비스 서버 구현 및 작업 유형별 궤적 생성 알고리즘 개발"

---

### 4단계: 기술적 상세 (파라미터, 알고리즘, 설정)

**패턴:**
```
- [구체적 구현체/설정 파일] 설정을 통해 [파라미터1], [파라미터2], [파라미터3] 구현
- [알고리즘명] 기반 [세부 기능] 구현
- [구체적 수치/설정]: [값1](설명), [값2](설명) 등
```

**작성 규칙:**
- 구체적인 파라미터 값과 단위를 반드시 명시
- 알고리즘 이름은 영문 병기 권장 (예: 게인 스케줄링(Gain Scheduling))
- 설정 파일명, 변수명, 함수명은 실제 코드와 일치
- 수치는 정확한 값 사용 (추정치 금지)

**예시:**
- "can_config.yaml 설정 파일을 통해 CAN 인터페이스(can0), 비트레이트(500kbps), 디바이스별 CAN ID 매핑 체계 구현"
- "fk_excavator 함수 구현: 관절 각도(θ₁, θ₂, θ₃)로부터 버킷 끝단 위치(xk, yk) 및 자세(φ_e) 계산"
- "굴착기 기하학 파라미터 적용: L1=2464mm(Boom), L2=1352mm(Arm), L3=830mm(Bucket), a1=930mm(수평 오프셋), h1=1130mm(수직 오프셋)"
- "관절별 PI 게인 튜닝: Swing(Kp=6.0, Ki=0.0), Boom(Kp=12.0, Ki=2.0), Arm(Kp=16.0, Ki=2.0), Bucket(Kp=10.0, Ki=1.0)"

---

## 섹션 완성 예시

```markdown
### 1.1. CAN 통신 기반 다중 센서 데이터 수집 및 융합 시스템 구축

- 본 사업에서 맡은 주요 연구 과제는 굴착기 자율화를 위한 CAN 통신 기반 다중 센서 데이터 수집 및 융합 시스템 개발임
- 기존의 개별 센서 운용 방식으로는 실시간 동기화 및 데이터 일관성 확보가 어려우므로, 통합 CAN 버스 아키텍처를 통한 센서 융합 시스템 구축이 필요함
- 이를 위해 can_bridge_node 개발을 통한 SocketCAN 기반 실시간 CAN 통신 인터페이스 구현 및 CAN ID별 메시지 파싱 시스템 개발
- can_config.yaml 설정 파일을 통해 CAN 인터페이스(can0), 비트레이트(500kbps), 디바이스별 CAN ID 매핑 체계 구현
- 다중 센서 동시 수신을 위한 멀티스레드 아키텍처 구현 및 센서 데이터 타임스탬프 동기화 시스템 구축

그림. CAN 통신 기반 센서 융합 시스템 아키텍처
```

---

## 그림 캡션 형식

각 섹션 끝에는 반드시 그림 캡션을 포함합니다.

**패턴:**
```
그림. [구체적 기술 설명]
```

**캡션 유형 선택 기준:**

| 섹션 특성 | 캡션 유형 | 예시 |
|----------|----------|------|
| 시스템 구조 | 아키텍처 | "~ 시스템 아키텍처" |
| 알고리즘 흐름 | 흐름도 | "~ 알고리즘 흐름도" |
| 데이터 흐름 | 블록 다이어그램 | "~ 데이터 흐름도" |
| 조직/역할 | 구성도 | "~ 구성도" |
| 시간순 프로세스 | 로드맵 | "~ 로드맵" |
| 제어 시스템 | 블록 다이어그램 | "~ 블록 다이어그램" |

---

## 금지 사항

1. **추상적 표현 금지**
   - ❌ "시스템을 개발하였음"
   - ✅ "can_bridge_node를 통한 SocketCAN 기반 실시간 CAN 통신 인터페이스를 구현함"

2. **수치 누락 금지**
   - ❌ "높은 주기로 연산"
   - ✅ "20Hz 주기로 연산"

3. **알고리즘명 누락 금지**
   - ❌ "제어 알고리즘 적용"
   - ✅ "게인 스케줄링(Gain Scheduling) 알고리즘 적용"

4. **단위 누락 금지**
   - ❌ "길이 2464"
   - ✅ "길이 2464mm"

---

## 도메인별 용어 치환

연구 분야에 따라 범용 용어를 도메인 특화 용어로 치환합니다.

| 범용 용어 | ROS2 | AI/ML | 물리학 |
|----------|------|-------|--------|
| 모듈 | 노드 | 모듈/레이어 | 모듈 |
| 처리 | 퍼블리시 | 추론 | 연산 |
| 설정 | 파라미터 | 하이퍼파라미터 | 파라미터 |
| 연결 | 토픽/서비스 | 레이어 연결 | 인터페이스 |
| 입력 | 구독 | 입력 텐서 | 입력 신호 |
| 출력 | 발행 | 출력 텐서 | 출력 신호 |
